@model MvcForbiddenIsland.Models.Island

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript" language="javascript">
    function onSubmitButtonClick(rowNumber, columnNumber) 
    {

        if ($("#textbox1").val() == "")
        {
            $("#textbox1").val(rowNumber);
            $("#textbox2").val(columnNumber);
        }
        else if ($("#textbox3").val() == "")
        {
            $("#textbox3").val(rowNumber);
            $("#textbox4").val(columnNumber);
        }
        else if ($("#textbox5").val() == "")
        {
            $("#textbox5").val(rowNumber);
            $("#textbox6").val(columnNumber);
        }
    }
</script>

<h2>Index</h2>

<p>
    @Html.TextBox("textbox1") @Html.TextBox("textbox2")
</p>

<p>
    @Html.TextBox("textbox3") @Html.TextBox("textbox4")
</p>

<p>
    @Html.TextBox("textbox5") @Html.TextBox("textbox6")
</p>


<table>
    @DisplayIslandRow(1)
    @DisplayIslandRow(2)
    @DisplayIslandRow(3)
    @DisplayIslandRow(4)
    @DisplayIslandRow(5)
    @DisplayIslandRow(6)
</table>

@helper DisplayIslandRow(int i)
{
    <tr>


        @foreach (var item in Model.IslandBoard.Where(x => x.rowNumber == i).OrderBy(x => x.columnNumber))
        {
            <td onclick="onSubmitButtonClick(@item.rowNumber,@item.columnNumber)">
                @item.Name
                @item.StartingTileForPlayer
                @item.SubmergedState

                @item.PlayersOnTile.Count

                @if (item.PlayersOnTile.Count == 0)
                {
                    <p> No Player</p>
                }
                else
                {
                    foreach (var x in item.PlayersOnTile)
                    {
                        @x.Name
                        @x.Colour
                        @x.Action
                    }
                }
            </td>
        }
    </tr>
}

